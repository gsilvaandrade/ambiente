pipeline {
    agent { 
	  dockerfile true
	}
    stages {
        stage('build') {
            steps {
                sh 'mvn --version'
            }
        }
    }
	stage('Push Docker Images to Nexus Registry'){
		sh 'docker login -u admin -p admin http://localhost:8081/'
		sh 'docker push http://localhost:8081//Imagename}'
		sh 'docker rmi $(docker images --filter=reference="http://localhost:8081//ImageName*" -q)'
		sh 'docker logout http://localhost:8081/'
	}
}